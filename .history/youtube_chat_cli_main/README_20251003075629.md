# Personal Research Insight CLI


> Nexus Agents: Flowise workflows migrated to native Python with LangGraph. See section below for details.

## Nexus Agents (Deep Research + Content Checks)

The Flowise workflows have been migrated into native Python using LangGraph. Two public entry points are available via API and CLI:

- Deep Research: topic enhancement → multi-agent loop → session persistence
- Content Checks: execute deep research → duplicate check → NOVEL synthesize or REDUNDANT refine+loop

CLI examples:

- `jaegis agents deep-research --topic "AI safety" --max-turns 2`
- `jaegis agents content-check --topic "AI safety" --max-loops 1`
- `jaegis agents archive status | reindex [--force] | queue`
- `jaegis agents graph deep-research|content-checks`

API: docs/API.md; Postman collection at `examples/postman/nexus_agents.postman_collection.json`.

Playwright (optional) for JS-rendered sites:
- `pip install playwright`
- `playwright install chromium`

Copy `.env.example` to `.env` and adjust values.

A powerful command-line interface tool for extracting, processing, and querying content from YouTube videos and websites using AI. Transform lengthy content into interactive research sessions with AI-powered summaries, FAQs, and conversational Q&A.

## 🌟 Features

- **Content Ingestion**: Extract transcripts from YouTube videos and scrape text from websites
- **AI Analysis**: Generate summaries, FAQs, table of contents, and podcast scripts
- **Interactive Chat**: Conversational Q&A with context-aware AI responses
- **Audio Generation**: Create podcast-style audio overviews with text-to-speech
- **Session Management**: Persistent state across sessions with chat history
- **n8n Integration**: Bridge with powerful backend RAG workflows
- **Modular Design**: Extensible architecture for custom integrations

## 🚀 Quick Start

### Prerequisites

- Python 3.10+
- OpenRouter.ai API key (free tier available)
- Optional: MaryTTS server for audio features
- Optional: n8n workflow for advanced RAG

### Installation

1. **Clone or download the project**
   ```bash
   # If you have git
   git clone <repository-url>
   cd youtube-chat-cli-main
   ```

2. **Set up virtual environment**
   ```bash
   python -m venv venv
   # On Windows:
   venv\Scripts\activate
   # On macOS/Linux:
   # source venv/bin/activate
   ```

3. **Install dependencies**
   ```bash
   pip install -r requirements.txt
   ```

4. **Configure environment**
   ```bash
   cp .env.template .env
   # Edit .env with your API keys
   ```

### Basic Usage

1. **Set a content source**
   ```bash
   python -m youtube-chat-cli-main set-source "https://youtu.be/dQw4w9WgXcQ"
   # or
   python -m youtube-chat-cli-main set-source "https://example.com/article"
   ```

2. **Analyze the content**
   ```bash
   # Generate summary
   python -m youtube-chat-cli-main summarize

   # Create FAQ
   python -m youtube-chat-cli-main faq

   # Build table of contents
   python -m youtube-chat-cli-main toc
   ```

3. **Interactive session**
   ```bash
   python -m youtube-chat-cli-main chat
   ```

## 📖 Commands

### Session Management
```bash
# View current session info
python -m youtube-chat-cli-main session view

# Clear chat history
python -m youtube-chat-cli-main session clear-history

# Clear everything and start fresh
python -m youtube-chat-cli-main session clear-all

# Generate new session ID
python -m youtube-chat-cli-main session new-id
```

### Content Processing
```bash
# Set active content source (YouTube or website)
python -m youtube-chat-cli-main set-source <URL>

# Display processed text
python -m youtube-chat-cli-main print-text
```

### AI Analysis
```bash
# Generate content summary
python -m youtube-chat-cli-main summarize

# Create frequently asked questions
python -m youtube-chat-cli-main faq

# Build table of contents
python -m youtube-chat-cli-main toc

# Interactive Q&A session
python -m youtube-chat-cli-main chat
```

### Audio Features
```bash
# Generate podcast-style audio
python -m youtube-chat-cli-main podcast

# Specify custom output file
python -m youtube-chat-cli-main podcast --output my_podcast.wav
```

### Advanced Integration
```bash
# Check service connectivity
python -m youtube-chat-cli-main verify-connections

# Send message to n8n RAG workflow
python -m youtube-chat-cli-main invoke-n8n "Analyze this topic"
```

## ⚙️ Configuration

Create a `.env` file in the project root:

```bash
# Required: OpenRouter API key (get from https://openrouter.ai/)
OPENROUTER_API_KEY=your_openrouter_api_key_here

# Optional: MaryTTS server URL (for audio features)
MARYTTS_SERVER_URL=http://localhost:59125

# Optional: n8n webhook URL (for advanced RAG)
N8N_WEBHOOK_URL=http://localhost:5678/workflow/your-workflow-id
```

## 🏗️ Architecture

### Core Modules

- **`session_manager.py`**: Persistent session state with JSON storage
- **`source_processor.py`**: Content extraction from YouTube and web sources
- **`llm_service.py`**: OpenRouter.ai integration for AI analysis
- **`tts_service.py`**: MaryTTS integration for audio generation
- **`n8n_client.py`**: Webhook client for n8n workflow integration
- **`cli.py`**: Command-line interface with Click framework

### Data Flow

```
URL Input → Content Processing → Punctuation Restoration → AI Analysis → User Interaction
      ↓              ↓                 ↓                 ↓            ↓
   YouTube       Transcript/        deeplearning     OpenRouter       CLI
  Website        Web Scraping       Language         AI Models      Commands
                                 Models (DMLP)
```

## 🔧 Development

### Running Tests

```bash
# Unit tests
pytest tests/ -v

# Integration tests
pytest tests/test_integration.py -v

# Basic import check (when dependencies not available)
python test_basic_imports.py
```

### Code Structure

```
youtube-chat-cli-main/
├── __init__.py              # Package initialization & logging
├── __main__.py              # Module entry point
├── cli.py                   # Command-line interface
├── session_manager.py       # Session persistence
├── source_processor.py      # Content extraction
├── llm_service.py           # AI service integration
├── tts_service.py           # Text-to-speech
├── n8n_client.py           # n8n workflow client
├── requirements.txt         # Python dependencies
├── .env.template           # Environment configuration template
├── .env                    # User environment (create this)
├── test_basic_imports.py    # Basic functionality test
└── tests/                  # Test suite
    ├── __init__.py
    ├── test_session_manager.py
    ├── test_source_processor.py
    ├── test_llm_service.py
    └── test_integration.py
```

## 🤝 Requirements Alignment

This implementation fulfills all requirements from the Product Requirements Document:

- ✅ **Free & Open Source**: Uses free-tier OpenRouter models, open-source libraries
- ✅ **CLI-Only**: Pure command-line interface, no GUI dependencies
- ✅ **YouTube & Web Support**: Full URL processing for both content types
- ✅ **AI Integration**: Context-aware LLM responses with guardrails
- ✅ **Session Persistence**: Cross-session state management
- ✅ **Modular Architecture**: Extensible design for future enhancements
- ✅ **Error Handling**: Graceful failure modes with clear user feedback
- ✅ **Audio Features**: Professional TTS with podcast generation
- ✅ **Backend Integration**: Seamless n8n RAG workflow connectivity

## 📄 License

This project is open source. Check individual library licenses for compliance.

## 🤝 Contributing

1. Fork the repository
2. Create a feature branch
3. Add tests for new functionality
4. Ensure all tests pass
5. Submit a pull request

## 🐛 Troubleshooting

### Common Issues

**"API key not found"**
- Ensure `.env` file exists with `OPENROUTER_API_KEY`
- Check that the API key is valid at openrouter.ai

**"No active source"**
- Run `set-source <URL>` before using analysis commands
- Check that the URL is valid and accessible

**"Service connection failed"**
- Run `verify-connections` to check service status
- Ensure local services (MaryTTS, n8n) are running if configured

**"Import errors"**
- Activate virtual environment: `venv\Scripts\activate`
- Install dependencies: `pip install -r requirements.txt`

### Getting Help

- Review error messages for specific guidance
- Check the `.env` configuration
- Run `verify-connections` to diagnose connectivity issues
- Check logs in `~/.youtube-chat-cli/logs/cli.log`

---

**Transform hours of content consumption into minutes of insight.** Use AI-powered research tools to explore, understand, and engage with digital content efficiently.
